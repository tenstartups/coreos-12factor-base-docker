---
write_files:

  # Environment files
<% Dir['./10-base/env.d/*.env'].each do |file| %>
  - path: /12factor/env.d/<%= File.basename(file) %>
    permissions: '0644'
    source: <%= file %>
<% end %>

  # Initialization scripts
<% Dir['./10-base/init/*'].each do |file| %>
  - path: /12factor/init/<%= File.basename(file) %>
    permissions: '0755'
    source: <%= file %>
<% end %>

# Initialization parts
<% Dir['./10-base/init.d/*.sh'].each do |file| %>
  - path: /12factor/init.d/<%= File.basename(file) %>
    permissions: '0755'
    source: <%= file %>
<% end %>

  # Script files
<% Dir['./10-base/script/*.sh'].each do |file| %>
  - path: /12factor/script/<%= File.basename(file) %>
    permissions: '0755'
    source: <%= file %>
<% end %>

  # Script files
<% Dir['./10-base/tools.d/*.sh'].each do |file| %>
  - path: /12factor/tools.d/<%= File.basename(file) %>
    permissions: '0755'
    source: <%= file %>
<% end %>

systemd_units:

  - name: 12factor-init-stage-two.service
    source: ./10-base/systemd/12factor-init-stage-two.service
  - name: docker-check-image-update.service
    source: ./10-base/systemd/docker-check-image-update.service
  - name: docker-check-image-update.timer
    start: true
    source: ./10-base/systemd/docker-check-image-update.timer
  - name: docker-cleanup.service
    source: ./10-base/systemd/docker-cleanup.service
  - name: docker-cleanup.timer
    start: true
    source: ./10-base/systemd/docker-cleanup.timer
  - name: newrelic-sysmond.service
    source: ./10-base/systemd/newrelic-sysmond.service
  - name: swapfile.service
    source: ./10-base/systemd/swapfile.service
  - name: install-tools.service
    start: true
    source: ./10-base/systemd/install-tools.service
