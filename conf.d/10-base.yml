---
host_files:

  # Environment files
<% source_files(:host, 'env.d/*.env') do |relative_path| %>
  - path: /12factor/<%= relative_path %>
    permissions: '0644'
    source: <%= relative_path %>
<% end %>

  # Initialization scripts
<% source_files(:host, 'init/*') do |relative_path| %>
  - path: /12factor/<%= relative_path %>
    permissions: '0755'
    source: <%= relative_path %>
<% end %>

# Initialization script pieces
<% source_files(:host, 'init.d/*.sh') do |relative_path| %>
  - path: /12factor/<%= relative_path %>
    permissions: '0755'
    source: <%= relative_path %>
<% end %>

  # Script files
<% source_files(:host, 'script/*.sh') do |relative_path| %>
  - path: /12factor/<%= relative_path %>
    permissions: '0755'
    source: <%= relative_path %>
<% end %>

  # Tools installation scripts
<% source_files(:host, 'tools.d/*.sh') do |relative_path| %>
  - path: /12factor/<%= relative_path %>
    permissions: '0755'
    source: <%= relative_path %>
<% end %>

systemd_units:

  - name: 12factor-init-stage-two.service
    source: systemd/12factor-init-stage-two.service
  - name: install-tools.service
    source: systemd/install-tools.service
  - name: swapfile.service
    source: systemd/swapfile.service
  - name: newrelic-agent.service
    source: systemd/newrelic-agent.service
  - name: newrelic-sysmond.service
    source: systemd/newrelic-sysmond.service
  - name: etcdd.service
    source: systemd/etcdd.service
  - name: etcd2env.service
    source: systemd/etcd2env.service
  - name: docker-check-image-update.timer
    start: true
    source: systemd/docker-check-image-update.timer
  - name: docker-check-image-update.service
    source: systemd/docker-check-image-update.service
  - name: docker-cleanup.timer
    start: true
    source: systemd/docker-cleanup.timer
  - name: docker-cleanup.service
    source: systemd/docker-cleanup.service
